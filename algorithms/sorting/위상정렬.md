# 위상 정렬

위상정렬(Topological Sorting)이란 유향 있는 비순환 그래프(DAG, Directed Acyclic)에서 사용할 수 있는 개념이다.
간단히 이야기해서, 작업 간의 선후관계가 있을 때 그 순서를 정해주는 알고리즘이다.

유향 비순환 그래프는 말 그대로 `방향이 있는 그래프`이고, `사이클이 없는 그래프`이다.
이런 그래프에서 정점(노드)은 작업을, 간선(엣지)는 작업 간의 선후 관계를 의미한다.
즉, 간선은 한 작업이 다른 작업 전에 이루어져야 함을 나타낸다.

# 위상 정렬 알고리즘

위상 정렬은 보통 DFS 또는 Kahn's 알고리즘을 사용해서 구현할 수 있다.

### 1. DFS를 이용한 위상 정렬

DFS를 사용한 방법은 각 정점에 대해 DFS를 수행하면서, 더 이상 방문할 노드가 없을 때 해당 노드를 출력(스택에 넣음)하는 방식이다.
즉, 모든 자식 노드들을 먼저 방문하고 자신을 처리한다.
이 방식은 그래프의 끝에서부터 처리된다.

> 알고리즘 흐름

1. 모든 정점을 반문하지 않은 상태로 표시한다.
2. 정점을 하나씩 선택해 DFS를 수행한다.
3. DFS가 끝나면 해당 정점을 스택에 넣는다.
4. 모든 정점에 대해 DFS가 끝나면 스택에 들어간 순서대로 정점을 꺼내면 위상 정렬 순서가 된다.

### 2. Kahn's 알고리즘

Kahn's 알고리즘은 위상 정렬에 특화된 알고리즘으로 `진입 차수`(해당 노드로 들어오는 간선의 수)를 기반으로 정렬하는 방법이다.

> 알고리즘 흐름

1. 그래프에서 각 정점의 진입 차수를 계산한다.
2. 진입 차수가 0인 정점을 큐에 넣는다.
3. 큐에서 하나씩 정점을 꺼내고, 해당 정점에서 나가는 간선을 제거한다.
4. 새롭게 진입 차수가 0이 된 정점을 다시 큐에 넣는다.
5. 큐가 빌 때까지 이 과정을 반보갛ㄴ다. 큐에서 꺼낸 순서가 위상 정렬 순서가 된다.

## 예시 코드 (Kahn's 알고리즘)

```python
from collections import deque

# 그래프와 진입 차수 설정
graph = {
    1: [2, 3],
    2: [4],
    3: [4, 6],
    4: [5],
    5: [],
    6: []
}

# 진입 차수 계산
in_degree = {i: 0 for i in graph}
for nodes in graph.values():
    for node in nodes:
        in_degree[node] += 1

# 진입 차수가 0인 노드를 큐에 넣기
queue = deque([node for node in graph if in_degree[node] == 0])

# 위상 정렬 결과
topo_sort = []

while queue:
    node = queue.popleft()
    topo_sort.append(node)

    # 간선 제거 후 진입 차수가 0이 된 노드를 큐에 추가
    for neighbor in graph[node]:
        in_degree[neighbor] -= 1
        if in_degree[neighbor] == 0:
            queue.append(neighbor)

print("위상 정렬 결과:", topo_sort)
```

### 위상 정렬의 응용

위상 정렬은 다양한 상황에서 사용할 수 있다.

- 작업 스케줄링: 여러 작업의 선후 관계가 있을 때, 작업을 어떤 순서로 수행해야 할지 결정할 때
- 컴파일러: 프로그램 내에서 함수 호출 순서를 결정할 때
- 프로젝트 관리: 여러 의존성을 가진 작업들을 수행할 때

위상 정렬은 복잡한 의존성을 처리하는 데 매우 유용하며, 그래프 이론의 중요한 개념 중 하나이다.
